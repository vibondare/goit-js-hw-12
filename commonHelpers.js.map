{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { gallery } from '../main.js';\nimport { loadButton } from '../main.js';\n\nimport { addLoader } from '../main.js';\nimport { hideLoader } from '../main.js';\nimport { showLoadButton } from '../main.js';\nimport { loadingMessageContainer } from '../main.js';\n\nexport function renderGallery(imagesData) {\n  const data = imagesData.hits;\n\n  const markup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"image\" width=\"358px\" />\n        </a>\n        <ul class=\"image-properties-list\">\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Likes</h2>\n                <p class=\"property-value\">${likes}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Views</h2>\n                <p class=\"property-value\">${views}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Comments</h2>\n                <p class=\"property-value\">${comments}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Downloads</h2>\n                <p class=\"property-value\">${downloads}</p>\n            </li>\n        </ul>\n    </li>\n`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  showLoadButton();\n\n  const lightbox = new simpleLightbox('.gallery a', {\n    captionsData: 'alt',\n  });\n\n  hideLoader();\n}\n","import iziToast from 'izitoast';\nimport axios from 'axios';\n\nimport { gallery } from '../main.js';\nimport { loadingMessageContainer } from '../main.js';\nimport errorIcon from '../img/error-icon.svg';\nimport { loadButton } from '../main.js';\n\nimport { addLoader } from '../main.js';\nimport { hideLoader } from '../main.js';\nimport { hideLoadButton } from '../main.js';\nimport { renderGallery } from './render-functions.js';\n\nlet imagesData = '';\nlet page = 1;\nlet elementsPerPage = 15;\n\nexport function getImages(link) {\n  gallery.innerHTML = '';\n  page = 1;\n  hideLoadButton();\n\n  async function fetchImages() {\n    try {\n      const response = await axios.get(\n        `${link}&page=${page}&per_page=${elementsPerPage}`\n      );\n      console.log(response.data);\n      return response.data;\n    } catch (error) {\n      alert('Error while fetching images from pixabay!');\n      console.log(error);\n    }\n  }\n\n  fetchImages(link).then(data => {\n    handleResponse(data);\n  });\n\n  function handleResponse(data) {\n    imagesData = data;\n\n    if (imagesData.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#B51B1B',\n        messageColor: '#FFFFFF',\n        position: 'topRight',\n        theme: 'dark',\n      });\n\n      gallery.innerHTML = '';\n\n      hideLoader();\n\n      return;\n    }\n\n    const maxPages = Math.floor(data.totalHits / elementsPerPage);\n    if (page > maxPages) {\n      iziToast.show({\n        title: 'Error',\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: 'blue',\n        messageColor: '#FFFFFF',\n        position: 'topRight',\n        theme: 'dark',\n        iconUrl: errorIcon,\n      });\n\n      hideLoadButton();\n\n      return;\n    }\n\n    renderGallery(imagesData);\n  }\n\n  loadButton.addEventListener('click', loadMoreImages);\n\n  function loadMoreImages() {\n    page++;\n\n    fetchImages().then(data => {\n      handleResponse(data);\n    });\n\n    function smoothScroll() {\n      const cardHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    smoothScroll();\n  }\n}\n","import { getImages } from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector('.search-form');\nexport const searchInput = document.querySelector('#search-input');\nexport const gallery = document.querySelector('.gallery');\nexport const loadingMessageContainer = document.querySelector('.loading-message-container');\nexport const loadButtonContainer = document.querySelector('.load-button-container');\nexport const loadButton = document.querySelector('.load-button');\n\nsearchForm.addEventListener(\"submit\", submitSearch);\n// loadButton.addEventListener(\"click\", loadMoreImages);\n\nexport function addLoader() {\n  loadingMessageContainer.classList.add(\n    'loading-message-container-is-visible'\n  );\n}\n\nexport function hideLoader() {\n  loadingMessageContainer.classList.remove(\n    'loading-message-container-is-visible'\n  );\n}\n\nexport function showLoadButton() {\n  loadButtonContainer.style.display = 'block';\n}\n\nexport function hideLoadButton() {\n  loadButtonContainer.style.display = 'none';\n}\n\nfunction submitSearch(event) {\n  event.preventDefault();\n\n  if (!searchInput.value) {\n    return;\n  }\n\n  const key = '42569288-7bb99e6b1dd10eb6153443a4f';\n  const basicLink = 'https://pixabay.com/api/';\n  const q = searchInput.value;\n\n  const link = `${basicLink}?key=${key}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  addLoader();\n\n  getImages(link);\n}\n\n// function loadMoreImages() {\n\n// }\n\n\n"],"names":["errorIcon","renderGallery","imagesData","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","showLoadButton","simpleLightbox","hideLoader","page","elementsPerPage","getImages","link","hideLoadButton","fetchImages","response","axios","error","data","handleResponse","iziToast","maxPages","loadButton","loadMoreImages","smoothScroll","cardHeight","searchForm","searchInput","loadingMessageContainer","loadButtonContainer","submitSearch","addLoader","event","key","basicLink","q"],"mappings":"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"}