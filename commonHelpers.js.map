{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error-icon.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page, elementsPerPage) {\n  const key = '42569288-7bb99e6b1dd10eb6153443a4f';\n  const basicLink = 'https://pixabay.com/api/';\n\n  const link = `${basicLink}?key=${key}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  try {\n    const response = await axios.get(`${link}&page=${page}&per_page=${elementsPerPage}`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    alert('Error while fetching images from pixabay!');\n    console.log(`Error: ${error}`);\n  }\n}\n","export function renderGallery(imagesData) {\n  return imagesData\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"image\" width=\"358px\" />\n        </a>\n        <ul class=\"image-properties-list\">\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Likes</h2>\n                <p class=\"property-value\">${likes}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Views</h2>\n                <p class=\"property-value\">${views}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Comments</h2>\n                <p class=\"property-value\">${comments}</p>\n            </li>\n            <li class=\"image-properties-list-item\">\n                <h2 class=\"property-name\">Downloads</h2>\n                <p class=\"property-value\">${downloads}</p>\n            </li>\n        </ul>\n    </li>\n`\n    )\n    .join('');\n}\n","export default \"__VITE_ASSET__09c89fb5__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nimport errorIcon from './img/error-icon.svg';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('#search-input');\nconst gallery = document.querySelector('.gallery');\nconst loadingMessageContainer = document.querySelector(\n  '.loading-message-container'\n);\nconst loadButtonContainer = document.querySelector('.load-button-container');\nconst loadButton = document.querySelector('.load-button');\n\nsearchForm.addEventListener('submit', submitSearch);\n\nfunction addLoader() {\n  loadingMessageContainer.classList.add('loading-message-container-is-visible');\n}\n\nfunction hideLoader() {\n  loadingMessageContainer.classList.remove(\n    'loading-message-container-is-visible'\n  );\n}\n\nfunction showLoadButton() {\n  loadButtonContainer.style.display = 'block';\n}\n\nfunction hideLoadButton() {\n  loadButtonContainer.style.display = 'none';\n}\n\nfunction submitSearch(event) {\n  event.preventDefault();\n\n  if (!searchInput.value) {\n    return;\n  }\n\n  gallery.innerHTML = '';\n\n  addLoader();\n\n  let lightbox;\n  let currentQuery;\n\n  let page = 1;\n  let elementsPerPage = 15;\n  const q = searchInput.value;\n  const resp = fetchImages(q, page, elementsPerPage);\n\n  resp\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#B51B1B',\n          messageColor: '#FFFFFF',\n          position: 'topRight',\n          theme: 'dark',\n          iconUrl: errorIcon,\n        });\n\n        hideLoader();\n        hideLoadButton();\n        return;\n      }\n\n      const markup = renderGallery(data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n      hideLoader();\n\n      lightbox = new simpleLightbox('.gallery a', {\n        captionsData: 'alt',\n      });\n\n      currentQuery = q;\n\n      showLoadButton();\n    })\n    .catch(error => alert(error.message));\n\n  loadButton.addEventListener('click', loadMoreImages);\n\n  function loadMoreImages() {\n    page++;\n\n    fetchImages(currentQuery, page, elementsPerPage)\n      .then(data => {\n        gallery.insertAdjacentHTML('beforeend', renderGallery(data.hits));\n\n        const maxPages = Math.floor(data.totalHits / elementsPerPage);\n        console.log(maxPages);\n        if (page > maxPages) {\n          iziToast.show({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight',\n          });\n\n          hideLoadButton();\n          return;\n        }\n\n        lightbox.refresh();\n\n        function smoothScroll() {\n          const cardHeight = document\n            .querySelector('.gallery-item')\n            .getBoundingClientRect().height;\n\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n\n        smoothScroll();\n      })\n      .catch(error => alert(error.message));\n  }\n}\n"],"names":["fetchImages","query","page","elementsPerPage","link","response","axios","error","renderGallery","imagesData","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorIcon","searchForm","searchInput","gallery","loadingMessageContainer","loadButtonContainer","loadButton","submitSearch","addLoader","hideLoader","showLoadButton","hideLoadButton","event","lightbox","currentQuery","q","data","iziToast","markup","simpleLightbox","loadMoreImages","maxPages","smoothScroll","cardHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAOC,EAAMC,EAAiB,CAI9D,MAAMC,EAAO,qEAA6BH,CAAK,2DAE/C,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAI,GAAGF,CAAI,SAASF,CAAI,aAAaC,CAAe,EAAE,EACnF,eAAQ,IAAIE,EAAS,IAAI,EAClBA,EAAS,IACjB,OAAQE,EAAO,CACd,MAAM,2CAA2C,EACjD,QAAQ,IAAI,UAAUA,CAAK,EAAE,CAC9B,CACH,CChBO,SAASC,EAAcC,EAAY,CACxC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BL,CAAa;AAAA,wBAC7BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4CAKNC,CAAK;AAAA;AAAA;AAAA;AAAA,4CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,4CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,4CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,CAKhD,EACA,KAAK,EAAE,CACZ,CCtCA,MAAeC,EAAA,gDCUTC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAA0B,SAAS,cACvC,4BACF,EACMC,EAAsB,SAAS,cAAc,wBAAwB,EACrEC,EAAa,SAAS,cAAc,cAAc,EAExDL,EAAW,iBAAiB,SAAUM,CAAY,EAElD,SAASC,GAAY,CACnBJ,EAAwB,UAAU,IAAI,sCAAsC,CAC9E,CAEA,SAASK,GAAa,CACpBL,EAAwB,UAAU,OAChC,sCACJ,CACA,CAEA,SAASM,GAAiB,CACxBL,EAAoB,MAAM,QAAU,OACtC,CAEA,SAASM,GAAiB,CACxBN,EAAoB,MAAM,QAAU,MACtC,CAEA,SAASE,EAAaK,EAAO,CAG3B,GAFAA,EAAM,eAAc,EAEhB,CAACV,EAAY,MACf,OAGFC,EAAQ,UAAY,GAEpBK,IAEA,IAAIK,EACAC,EAEA7B,EAAO,EACPC,EAAkB,GACtB,MAAM6B,EAAIb,EAAY,MACTnB,EAAYgC,EAAG9B,EAAMC,CAAe,EAG9C,KAAK8B,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,KAAK,CACZ,QACE,2EACF,gBAAiB,UACjB,aAAc,UACd,SAAU,WACV,MAAO,OACP,QAASjB,CACnB,CAAS,EAEDS,IACAE,IACA,MACD,CAED,MAAMO,EAAS3B,EAAcyB,EAAK,IAAI,EACtCb,EAAQ,mBAAmB,YAAae,CAAM,EAE9CT,IAEAI,EAAW,IAAIM,EAAe,aAAc,CAC1C,aAAc,KACtB,CAAO,EAEDL,EAAeC,EAEfL,GACN,CAAK,EACA,MAAMpB,GAAS,MAAMA,EAAM,OAAO,CAAC,EAEtCgB,EAAW,iBAAiB,QAASc,CAAc,EAEnD,SAASA,GAAiB,CACxBnC,IAEAF,EAAY+B,EAAc7B,EAAMC,CAAe,EAC5C,KAAK8B,GAAQ,CACZb,EAAQ,mBAAmB,YAAaZ,EAAcyB,EAAK,IAAI,CAAC,EAEhE,MAAMK,EAAW,KAAK,MAAML,EAAK,UAAY9B,CAAe,EAE5D,GADA,QAAQ,IAAImC,CAAQ,EAChBpC,EAAOoC,EAAU,CACnBJ,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACtB,CAAW,EAEDN,IACA,MACD,CAEDE,EAAS,QAAO,EAEhB,SAASS,GAAe,CACtB,MAAMC,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAW,CACF,CAEDD,GACR,CAAO,EACA,MAAMhC,GAAS,MAAMA,EAAM,OAAO,CAAC,CACvC,CACH"}